// MINIFIED VERSION OF THE FILE OF THE SAME NAME IN THE `src` FOLDER
// MINIFIED WITH https://www.toptal.com/developers/javascript-minifier
// MINIFIED AT Wed May 14 15:29:13 CDT 2025

export class Loader{constructor(){this.activeList=[],this.compressor=new URIManager}async load(){this.activeList=this.compressor.pull().split(","),document.getElementById("printout_loadparams").innerHTML=this.activeList.join("\n");var t=window.audioNodes;for(var e of t)if(this.activeList.some(t=>t.startsWith(e.src))){await e.play();var s=this.activeList.find(t=>t.startsWith(e.src));for(var a of(await e.adjustVolume(s.split(";")[1]),e.elements))a.querySelectorAll(".SLIDER")[0].value=100*Math.cbrt(parseFloat(s.split(";")[1])/2)}}}export class Saver{constructor(){this.activeList=[],this.compressor=new URIManager,this.oldDigest=""}async save(){this.activeList=[];var t=window.audioNodes;for(var e of t)e.playing&&this.activeList.push(e.src+";"+Math.round(100*e.volume)/100);var s=this.activeList.join(",");let a=new TextEncoder;var r=await crypto.subtle.digest("SHA-256",a.encode(s));r!=this.oldDigest&&(this.compressor.push(s),this.oldDigest=r,console.debug(this))}}export class URIManager{constructor(){this.maxURILength=8192,this.defaultCompression="BEST",this.defaultEncoding="URI-B64",this.lastAlert=new Date(0)}alertNoSpam(){new Date().getTime()-this.lastAlert>=3e4&&alert("Maxium URL Length Reached!\n\nShorten your document or prepare to save the raw text content!"),this.lastAlert=new Date().getTime()}pull(t){var e=this.getURL(t),s=window.URICompressor.pull(e.data,e.compressor,e.encoding).data;return(""==s||null==s)&&console.error("Couldn't decode the provided link.\nCould not parse Data Parameter."),s=s.replace(/\s+$/gm,"")}push(t){var e=window.URICompressor.push(t,this.defaultCompression,this.defaultEncoding);return this.setURL(e.data,e.compression,e.encoding),null}setURL(t,e,s){var a=window.location.href.split("?")[0],r=a+"?enc="+s+"&cmpr="+e+"&data="+t;window.link_full=r,r.length+512>this.maxURILength&&(r=a+"?enc="+s+"&cmpr="+e+"&data=MAXIMUM-LINK-LENGTH-EXCEEDED",this.alertNoSpam()),history.replaceState({},"",r)}getURL(){var t=/(?:data=)([^\&\=\?]*)/gm.exec(window.location.href);t=null==t||""==t[1]?"":t[1];var e=/(?:cmpr=)([^\&\=\?]*)/gm.exec(window.location.href);e=null==e||""==e[1]?"ZLIB":e[1];var s=/(?:enc=)([^\&\=\?]*)/gm.exec(window.location.href);s=null==s||""==s[1]?"URI-B64":s[1];var a={};return a.encoding=s,a.compressor=e,a.data=t,a}}